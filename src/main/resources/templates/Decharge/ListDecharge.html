


<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:replace="fragments/layout :: head"/>
<link rel="stylesheet" type="text/css"
      th:href="@{https://www.virtuosoft.eu/code/bootstrap-duallistbox/bootstrap-duallistbox/v3.0.2/bootstrap-duallistbox.css}">
<script th:src="@{https://www.virtuosoft.eu/code/bootstrap-duallistbox/bootstrap-duallistbox/v3.0.2/jquery.bootstrap-duallistbox.js}"></script>


<style>
    .autocomplete-suggestions {
        border: 1px solid #999;
        background: #FFF;
        overflow: auto;
    }

    .autocomplete-suggestion {
        padding: 2px 5px;
        white-space: nowrap;
        overflow: hidden;
    }

    .autocomplete-selected {
        background: #F0F0F0;
    }

    .autocomplete-suggestions strong {
        font-weight: normal;
        color: #3399FF;
    }

    .autocomplete-group {
        padding: 2px 5px;
    }

    .autocomplete-group strong {
        display: block;
        border-bottom: 1px solid #000;
    }


</style>
<style>
    .moveall,
    .removeall {
        border: 1px solid #ccc !important;
    }

    .moveall:hover {
        background: #efefef;
    }

    .removeall:hover {
        background: #efefef;
    }

    /*// Only included because button labels aren't showing */

    .moveall::after {
        content: attr(title);

    }

    .removeall::after {
        content: attr(title);
    }

    /*// Custom styling form*/
    .form-control option {
        padding: 10px;
        border-bottom: 1px solid #efefef;
    }
</style>
<body class="header-fixed">
<!-- partial:../../partials/_header.html -->
<nav class="t-header" th:replace="fragments/navbar::navbar"></nav>
<!-- partial -->
<div class="page-body">
    <!-- partial:../../partials/_sidebar.html -->
    <div class="sidebar" th:replace="fragments/sidebar::sidebar"></div>
    <!-- partial -->
    <div class="page-content-wrapper">
        <div class="page-content-wrapper-inner">
            <div class="viewport-header">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb has-arrow">
                        <li class="breadcrumb-item">
                            <a href="#">Liste du Pointage</a>
                        </li>
                    </ol>
                </nav>
                <div class="alert-success">
                    <p></p>
                </div>
            </div>
            <div class="content-viewport">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <button class="btn btn-primary" data-target="#exampleModalCenterSimple" data-toggle="modal"
                                    id="ajout">
                                Ajouter
                            </button>
                            <div class="row showcase_row_area float-lg-right">
                                <div class="col-md-6 showcase_text_area float-lg-left">
                                    <label>Filtrer par état :</label>
                                </div>
                                <div class="col-md-6 showcase_content_area float-lg-right">
                                    <div class="dropdown show ">
                                        <a class="btn btn-sm btn-dark dropdown-toggle"
                                           href="#"
                                           role="button"
                                           id="dropdownMenuLink"
                                           data-toggle="dropdown" aria-haspopup="true"
                                           aria-expanded="false">
                                            Choisir une option
                                        </a>

                                        <div class="dropdown-menu"
                                             aria-labelledby="dropdownMenuLink">
                                            <a type="button" class="dropdown-item"
                                               th:href="@{/Decharge/Liste(statut=${'All'})}">Toutes</a>
                                            <a type="button" class="dropdown-item"
                                               th:href="@{/Decharge/Liste(statut=${'BROUILLON'})}">BROUILLON</a>
                                            <a type="button" class="dropdown-item"
                                               th:href="@{/Decharge/Liste(statut=${'IMPRIMEE'})}">IMPRIMEE</a>
                                            <a type="button" class="dropdown-item"
                                               th:href="@{/Decharge/Liste(statut=${'SIGNEE'})}">SIGNEE</a>
                                            <a type="button" class="dropdown-item"
                                               th:href="@{/Decharge/Liste(statut=${'ANNULEE'})}">ANNULEE</a>
                                            <a type="button" class="dropdown-item"
                                               th:href="@{/Decharge/Liste(statut=${'A_RECUPERER'})}">A_RECUPERER</a>
                                            <a type="button" class="dropdown-item"
                                               th:href="@{/Decharge/Liste(statut=${'LIBEREE'})}">LIBEREE</a>
                                            <a type="button" class="dropdown-item"
                                               th:href="@{/Decharge/Liste(statut=${'STC'})}">STC</a>
                                            <a type="button" class="dropdown-item"
                                               th:href="@{/Decharge/Liste(statut=${'EXPEDIEE'})}">EXPEDIEE</a>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="modal fade" id="exampleModalCenterSimple" tabindex="-1"
                                 role="dialog" aria-labelledby="exampleModalCenterTitle"
                                 aria-hidden="true">
                                <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <form id="formSubmit">
                                            <div class="modal-header ">
                                                <h5 class="modal-title" id="exampleModalLongTitleSimple">
                                                    Ajouter un décharge</h5>
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">

                                                <div class="content-viewport">
                                                    <div class="row">
                                                        <div class="col-lg-12">

                                                            <div class="grid">
                                                                <p class="grid-header">Choisir l'employé</p>
                                                                <div class="grid-body">
                                                                    <div class="item-wrapper">
                                                                        <div class="row">
                                                                            <div class="col-md-8 mx-auto">
                                                                                <div class="row showcase_row_area">
                                                                                    <div class="col-md-3 showcase_text_area">
                                                                                        <label>Individu :</label>
                                                                                    </div>
                                                                                    <div class="col-md-9 showcase_content_area">
                                                                                        <select class="custom-select"
                                                                                                id="customselect3"
                                                                                                style="width: 100%"
                                                                                                required>
                                                                                            <option th:each="emp : ${emps}"
                                                                                                    th:id="${emp.individu}"
                                                                                                    th:value="${emp.id}"
                                                                                                    th:text="${emp.individu +' '+emp.nom.trim()+' '+emp.prenom.trim()}"
                                                                                            ></option>
                                                                                        </select>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="row showcase_row_area">
                                                                                    <div class="col-md-3 showcase_text_area">
                                                                                        <label>Chantier :</label>
                                                                                    </div>
                                                                                    <div class="col-md-9 showcase_content_area">
                                                                                        <select class="custom-select"
                                                                                                id="customselect4"
                                                                                                style="width: 100%"
                                                                                                required>
                                                                                            <option th:each="chantier : ${chantier}"
                                                                                                    th:id="${chantier.code}"
                                                                                                    th:value="${chantier.id}"
                                                                                                    th:text="${chantier.code.trim() +' '+chantier.designation.trim()}"
                                                                                            ></option>
                                                                                        </select>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="row showcase_row_area">
                                                                                    <div class="col-md-3 showcase_text_area">
                                                                                        <label>Date :</label>
                                                                                    </div>
                                                                                    <div class="col-md-9 showcase_content_area">
                                                                                        <div class="custom-file">
                                                                                            <input type="date"
                                                                                                   name="dateDecharge"
                                                                                                   id="dateDecharge"
                                                                                                   class="form-control"
                                                                                                   required>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="grid">
                                                                <p class="grid-header">Matériel et Quantité</p>
                                                                <div class="grid-body">
                                                                    <div class="item-wrapper">
                                                                        <div class="row">
                                                                            <div class="col-lg-12" id="divAppend">
                                                                                <div class="row">
                                                                                    <div class="col-sm-3">
                                                                                        <div class="col-md-3 showcase_text_area">
                                                                                            <label>Type</label>
                                                                                        </div>
                                                                                        <div class="col-md-9 showcase_content_area">
                                                                                            <select class="custom-select"
                                                                                                    name="materiel"
                                                                                                    required>
                                                                                                <option selected
                                                                                                        disabled
                                                                                                        value="">
                                                                                                    Choisir le type de
                                                                                                    matériel
                                                                                                </option>
                                                                                                <option th:each="materiel : ${materielList}"
                                                                                                        th:id="${materiel.type}"
                                                                                                        th:value="${materiel.id}"
                                                                                                        th:text="${materiel.type}"></option>
                                                                                            </select>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col-sm-3">
                                                                                        <div class="col-md-3 showcase_text_area">
                                                                                            <label>Marque</label>
                                                                                        </div>
                                                                                        <div class="col-md-9 showcase_content_area">
                                                                                            <div class="custom-file">
                                                                                                <input type="text"
                                                                                                       name="marque"
                                                                                                       id="marque"
                                                                                                       class="form-control"
                                                                                                       required>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col-sm-3">
                                                                                        <div class="col-md-3 showcase_text_area">
                                                                                            <label>Modéle</label>
                                                                                        </div>
                                                                                        <div class="col-md-9 showcase_content_area">
                                                                                            <div class="custom-file">
                                                                                                <input type="text"
                                                                                                       name="modele"
                                                                                                       id="modele"
                                                                                                       class="form-control"
                                                                                                       required>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col-sm-3">
                                                                                        <div class="col-md-3 showcase_text_area">
                                                                                            <label>Quantité</label>
                                                                                        </div>
                                                                                        <div class="col-md-9 showcase_content_area">
                                                                                            <div class="custom-file">
                                                                                                <input type="number"
                                                                                                       name="quantite"
                                                                                                       class="form-control"
                                                                                                       required>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <br>
                                                                            </div>
                                                                            <div class="col-lg-12" id="addLine">
                                                                                <a type="button" class="float-right"
                                                                                   onclick="addinputs()">
                                                                                    <i class="fa fa-plus"></i>
                                                                                    ajouter une ligne
                                                                                </a>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>

                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-light"
                                                        data-dismiss="modal">fermer
                                                </button>

                                                <button type="submit" class="btn btn-primary" id="ajoutPointageSimple">
                                                    Ajouter
                                                </button>

                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="grid">
                                    <p class="grid-header">Table du Pointage
                                    </p>

                                    <div class="item-wrapper">
                                        <div class="table-responsive" style="height: 700px;">
                                            <table class="table table-hover" >
                                                <thead>
                                                <tr>
                                                    <th></th>
                                                    <th>Date</th>
                                                    <th>Individu</th>
                                                    <th>Chantier</th>
                                                    <th>Matériel</th>
                                                    <th>Statut</th>
                                                    <th>----</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr th:if="${dechargeList.isEmpty()}">
                                                    <td class="text-lg-center" colspan="5"><strong
                                                            th:text="${'Aucun décharge saisi'}"></strong></td>
                                                </tr>
                                                <tr th:each="decharge : ${dechargeList}">
                                                    <td><a ><i class="fa fa-folder"></i></a></td>
                                                    <td th:text="${#dates.format(decharge.dateDecharge,'dd-MM-yyyy')}"></td>
                                                    <td>
                                                        <a th:href="@{/Decharge/generer/{id}(id=${decharge.id})}"
                                                           th:text="${decharge.individu.nom.trim()+' '+decharge.individu.prenom.trim()}"
                                                           target="_blank"></a>
                                                    </td>
                                                    <td th:text="${decharge.chantier.designation.trim()}"></td>
                                                    <td>
                                                        <li th:each="materiel : ${decharge.dechargeDetList}"
                                                            th:text="${''+materiel.quantite+ ' - '+ materiel.materiel.type+' '+materiel.marque+' '+materiel.model}"></li>
                                                    </td>
                                                    <td th:text="${decharge.statut}"></td>
                                                    <td>
                                                        <div class="dropdown show">
                                                            <a class="btn btn-xs btn-dark dropdown-toggle"
                                                               href="#"
                                                               role="button"
                                                               th:id="${'dropdownMenuLink'+decharge.id}"
                                                               data-toggle="dropdown" aria-haspopup="true"
                                                               aria-expanded="false">
                                                                Action
                                                            </a>

                                                            <div class="dropdown-menu"
                                                                 aria-labelledby="dropdownMenuLink">
                                                                <a type="button" class="dropdown-item"
                                                                   data-target="#cancelModal"
                                                                   data-toggle="modal"
                                                                   th:attrappend="data-target=${decharge.id}">Annuler</a>
                                                                <a type="button" class="dropdown-item"
                                                                   data-target="#expedierModal" data-toggle="modal"
                                                                   th:hidden="${!decharge.statut.equals('IMPRIMEE')}" th:attrappend="data-target=${decharge.id}">Expédier</a>
                                                                <a type="button" class="dropdown-item"
                                                                   data-target="#recupererModal" data-toggle="modal"
                                                                   th:hidden="${!decharge.statut.equals('EXPEDIEE')}" th:attrappend="data-target=${decharge.id}">A_Récupérer</a>
                                                                <a type="button" class="dropdown-item"
                                                                   data-target="#SignerModal" data-toggle="modal"
                                                                   th:hidden="${!decharge.statut.equals('A_RECUPERER')}"  th:attrappend="data-target=${decharge.id}">Signer</a>
                                                                <a type="button" class="dropdown-item"
                                                                   data-target="#libererModal" data-toggle="modal"
                                                                   th:hidden="${!decharge.statut.equals('SIGNEE')}" th:attrappend="data-target=${decharge.id}">Libérer</a>
                                                            </div>
                                                            <div class="modal fade" id="cancelModal"
                                                                 tabindex="-1"
                                                                 th:attrappend="id=${decharge.id}"
                                                                 role="dialog"
                                                                 aria-labelledby="exampleModalCenterTitle5"
                                                                 aria-hidden="true">
                                                                <div class="modal-dialog modal-dialog-centered"
                                                                     role="document">
                                                                    <div class="modal-content">
                                                                        <form th:action="@{/Decharge/Annuler/{id}(id=${decharge.id})}" method="get">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title"
                                                                                    id="exampleModalCenterTitle5">
                                                                                    Annuler le décharge
                                                                                </h5>
                                                                                <button type="button"
                                                                                        class="close"
                                                                                        data-dismiss="modal"
                                                                                        aria-label="Close">
                                                                                    <span aria-hidden="true">&times;</span>
                                                                                </button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                <p>Voulez vous annuler le
                                                                                    decharge de  <br>
                                                                                    <strong th:text="${decharge.individu.nom + ' ' +decharge.individu.prenom}"></strong>
                                                                                </p>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button"
                                                                                        class="btn btn-secondary"
                                                                                        data-dismiss="modal">
                                                                                    Fermer
                                                                                </button>
                                                                                <input type="submit"
                                                                                       class="btn btn-danger"
                                                                                       value="Annuler"/>
                                                                            </div>
                                                                        </form>
                                                                    </div>

                                                                </div>
                                                            </div>

                                                            <div class="modal fade" id="expedierModal"
                                                                 tabindex="-1"
                                                                 th:attrappend="id=${decharge.id}"
                                                                 role="dialog"
                                                                 aria-labelledby="exampleModalCenterTitleExpedier"
                                                                 aria-hidden="true">
                                                                <div class="modal-dialog modal-dialog-centered"
                                                                     role="document">
                                                                    <div class="modal-content">
                                                                        <form th:action="@{/Decharge/expedier/{id}(id=${decharge.id})}" method="get">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title"
                                                                                    id="exampleModalCenterTitleExpedier">
                                                                                    Expédier le décharge
                                                                                </h5>
                                                                                <button type="button"
                                                                                        class="close"
                                                                                        data-dismiss="modal"
                                                                                        aria-label="Close">
                                                                                    <span aria-hidden="true">&times;</span>
                                                                                </button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                <p>Voulez vous Expédier le
                                                                                    decharge de  <br>
                                                                                    <strong th:text="${decharge.individu.nom + ' ' +decharge.individu.prenom}"></strong>
                                                                                </p>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button"
                                                                                        class="btn btn-secondary"
                                                                                        data-dismiss="modal">
                                                                                    Fermer
                                                                                </button>
                                                                                <input type="submit"
                                                                                       class="btn btn-danger"
                                                                                       value="Expédier"/>
                                                                            </div>
                                                                        </form>
                                                                    </div>

                                                                </div>
                                                            </div>

                                                            <div class="modal fade" id="libererModal"
                                                                 tabindex="-1"
                                                                 th:attrappend="id=${decharge.id}"
                                                                 role="dialog"
                                                                 aria-labelledby="exampleModalCenterlibererModal"
                                                                 aria-hidden="true">
                                                                <div class="modal-dialog modal-dialog-centered"
                                                                     role="document">
                                                                    <div class="modal-content">
                                                                        <form th:action="@{/Decharge/liberer/{id}(id=${decharge.id})}" method="get">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title"
                                                                                    id="exampleModalCenterlibererModal">
                                                                                    décharge à Libérer
                                                                                </h5>
                                                                                <button type="button"
                                                                                        class="close"
                                                                                        data-dismiss="modal"
                                                                                        aria-label="Close">
                                                                                    <span aria-hidden="true">&times;</span>
                                                                                </button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                <p>Voulez vous Libérer le
                                                                                    decharge de  <br>
                                                                                    <strong th:text="${decharge.individu.nom + ' ' +decharge.individu.prenom}"></strong>

                                                                                </p>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button"
                                                                                        class="btn btn-secondary"
                                                                                        data-dismiss="modal">
                                                                                    Fermer
                                                                                </button>
                                                                                <input type="submit"
                                                                                       class="btn btn-danger"
                                                                                       value="liberer"/>
                                                                            </div>
                                                                        </form>
                                                                    </div>

                                                                </div>
                                                            </div>

                                                            <div class="modal fade" id="recupererModal"
                                                                 tabindex="-1"
                                                                 th:attrappend="id=${decharge.id}"
                                                                 role="dialog"
                                                                 aria-labelledby="exampleModalCenterARecupererModal"
                                                                 aria-hidden="true">
                                                                <div class="modal-dialog modal-dialog-centered"
                                                                     role="document">
                                                                    <div class="modal-content">
                                                                        <form th:action="@{/Decharge/ARecuperer/{id}(id=${decharge.id})}" method="get">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title"
                                                                                    id="exampleModalCenterARecupererModal">
                                                                                    décharge à Libérer
                                                                                </h5>
                                                                                <button type="button"
                                                                                        class="close"
                                                                                        data-dismiss="modal"
                                                                                        aria-label="Close">
                                                                                    <span aria-hidden="true">&times;</span>
                                                                                </button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                <p>Voulez vous mettre le
                                                                                    decharge de  <br>
                                                                                    <strong th:text="${decharge.individu.nom + ' ' +decharge.individu.prenom}"></strong>
                                                                                    en etat à récupérer

                                                                                </p>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button"
                                                                                        class="btn btn-secondary"
                                                                                        data-dismiss="modal">
                                                                                    Fermer
                                                                                </button>
                                                                                <input type="submit"
                                                                                       class="btn btn-danger"
                                                                                       value="Récupérer"/>
                                                                            </div>
                                                                        </form>
                                                                    </div>

                                                                </div>
                                                            </div>

                                                            <div class="modal fade" id="SignerModal"
                                                                 tabindex="-1"
                                                                 th:attrappend="id=${decharge.id}"
                                                                 role="dialog"
                                                                 aria-labelledby="exampleModalCenterSignerModal"
                                                                 aria-hidden="true">
                                                                <div class="modal-dialog modal-dialog-centered"
                                                                     role="document">
                                                                    <div class="modal-content">
                                                                        <form th:action="@{/Decharge/Signer/{id}(id=${decharge.id})}" method="post" enctype="multipart/form-data">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title"
                                                                                    id="exampleModalCenterSignerModal">
                                                                                    décharge à Libérer
                                                                                </h5>
                                                                                <button type="button"
                                                                                        class="close"
                                                                                        data-dismiss="modal"
                                                                                        aria-label="Close">
                                                                                    <span aria-hidden="true">&times;</span>
                                                                                </button>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                <p>Voulez vous Déposer le
                                                                                    decharge signé de  <br>
                                                                                    <strong th:text="${decharge.individu.nom + ' ' +decharge.individu.prenom}"></strong>
                                                                                </p>
                                                                                <hr>
                                                                                <div class="col-sm-12">
                                                                                    <div class="col-md-3 showcase_text_area">
                                                                                        <label>Ficher :</label>
                                                                                    </div>
                                                                                    <div class="col-md-9 showcase_content_area">
                                                                                        <div class="custom-file">
                                                                                            <input type="file"
                                                                                                   name="file" accept="application/pdf"
                                                                                                   class="form-control"
                                                                                                   required>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button"
                                                                                        class="btn btn-secondary"
                                                                                        data-dismiss="modal">
                                                                                    Fermer
                                                                                </button>
                                                                                <input type="submit"
                                                                                       class="btn btn-danger"
                                                                                       value="Signer"/>
                                                                            </div>
                                                                        </form>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <nav aria-label="Page navigation example">
                            <ul class="pagination">
                                <li th:if="${dechargeList.number eq 0} ? 'disabled' : '' " class="page-item">
                                    <a th:if="${not dechargeList.isFirst()}"
                                       th:href="@{/Decharge/Liste(statut=${statut},size=${dechargeList.size}, page=${(dechargeList.totalPages - dechargeList.totalPages) + 1})}"
                                       class="page-link" title="Première">&laquo;</a>
                                    <a th:if="${dechargeList.isFirst()}"
                                       href="javascript:void(0)"
                                       class="page-link btn-primary" title="Première">&laquo;</a>
                                </li>
                                <li th:if="${dechargeList.number eq 0} ? 'disabled' : '' " class="page-item">
                                    <a th:if="${not dechargeList.isFirst()}"
                                       th:href="@{/Decharge/Liste(statut=${statut},size=${dechargeList.size}, page=${dechargeList.number})}"
                                       class="page-link" title="Précédente">&#8249;</a>
                                    <a th:if="${dechargeList.isFirst()}"
                                       href="javascript:void(0)"
                                       class="page-link btn-primary" title="Précédente">&#8249;</a>
                                </li>
                                <li th:if="${dechargeList.totalPages > 0}" th:each="pageNumber : ${pageNumbers}"
                                    class="page-item"
                                    th:classappend="${pageNumber eq dechargeList.number + 1} ? active">
                                    <a th:href="@{/Decharge/Liste(statut=${statut},size=${dechargeList.size}, page=${pageNumber})}"
                                       th:text="${pageNumber}"
                                       class="page-link"></a>
                                </li>
                                <li th:if="${dechargeList.number + 1 ge dechargeList.totalPages} ? 'disabled' : '' "
                                    class="page-item">
                                    <a th:if="${not dechargeList.isLast()}"
                                       th:href="@{/Decharge/Liste(statut=${statut},size=${dechargeList.size}, page=${dechargeList.number + 2})}"
                                       class="page-link" title="Suivante">&#8250;</a>
                                    <a th:if="${dechargeList.isLast()}"
                                       href="javascript:void(0)"
                                       class="page-link btn-primary" title="Suivante">&#8250;</a>
                                </li>
                                <li th:if="${dechargeList.number + 1 eq dechargeList.totalPages} ? 'disabled' : '' "
                                    class="page-item">
                                    <a th:if="${not dechargeList.isLast()}"
                                       th:href="@{/Decharge/Liste(statut=${statut},size=${dechargeList.size}, page=${dechargeList.totalPages})}"
                                       class="page-link" title="Dernière">&raquo;</a>
                                    <a th:if="${dechargeList.isLast()}"
                                       href="javascript:void(0)"
                                       class="page-link" title="Dernière">&raquo;</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>

            </div>
        </div>
        <!-- content viewport ends -->
        <!-- partial:../../partials/_footer.html -->
        <!-- partial -->
    </div>
    <!-- page content ends -->
</div>

<script>


    $(document).ready(function () {
        $('#IndividuSelect').select2({
            width: 'resolve',
            dropdownParent: $("#exampleModalCenterSimple")
        });
    });
    $(document).ready(function () {
        $('#AffaireSelect').select2({
            width: 'resolve',
            dropdownParent: $("#exampleModalCenterSimple")
        });
    });

    function addinputs() {
        let materiel = document.getElementsByName("materiel");
        $('#divAppend').append(' <div class="row">\n' +
            '<div class="col-sm-3">\n' +
            '                                                                                        <div class="col-md-3 showcase_text_area">\n' +
            '                                                                                            <label>type</label>\n' +
            '                                                                                        </div>\n' +
            '                                                                                        <div class="col-md-9 showcase_content_area">\n' +
            '                                                                                            <select class="custom-select"\n' +
            '                                                                                                    name="materiel" id="materiel' + materiel.length + '"\n' +
            '                                                                                                    required>\n' +
            '                                                                                                <option value="">\n' +
            '                                                                                                    Choisir le type de matériel\n' +
            '                                                                                                </option>\n' +
            '                                                                                            </select>\n' +
            '                                                                                        </div>\n' +
            '                                                                                    </div>\n' +
            '<div class="col-sm-3">\n' +
            '                                                                                        <div class="col-md-3 showcase_text_area">\n' +
            '                                                                                            <label>Marque</label>\n' +
            '                                                                                        </div>\n' +
            '                                                                                        <div class="col-md-9 showcase_content_area">\n' +
            '                                                                                            <div class="custom-file">\n' +
            '                                                                                                <input type="text"\n' +
            '                                                                                                       name="marque"\n' +
            '                                                                                                       id="marque"\n' +
            '                                                                                                       class="form-control"\n' +
            '                                                                                                       required>\n' +
            '                                                                                            </div>\n' +
            '                                                                                        </div>\n' +
            '                                                                                    </div>\n' +
            '                                                                                    <div class="col-sm-3">\n' +
            '                                                                                        <div class="col-md-3 showcase_text_area">\n' +
            '                                                                                            <label>Modéle</label>\n' +
            '                                                                                        </div>\n' +
            '                                                                                        <div class="col-md-9 showcase_content_area">\n' +
            '                                                                                            <div class="custom-file">\n' +
            '                                                                                                <input type="text"\n' +
            '                                                                                                       name="modele"\n' +
            '                                                                                                       id="modele"\n' +
            '                                                                                                       class="form-control"\n' +
            '                                                                                                       required>\n' +
            '                                                                                            </div>\n' +
            '                                                                                        </div>\n' +
            '                                                                                    </div>'+
            '                                                                                    <div class="col-sm-3">\n' +
            '                                                                                        <div class="col-md-3 showcase_text_area">\n' +
            '                                                                                            <label>Quantité</label>\n' +
            '                                                                                        </div>\n' +
            '                                                                                        <div class="col-md-9 showcase_content_area">\n' +
            '                                                                                            <div class="custom-file">\n' +
            '                                                                                                <input type="number" name="quantite"\n' +
            '                                                                                                       class="form-control" required>\n' +
            '                                                                                            </div>\n' +
            '                                                                                        </div>\n' +
            '                                                                                    </div>' +
            '                                                                                </div><br>');
        getProjet();
    }


    $('#formSubmit').on('submit', function (e) {

        var dechargeDetList = [];
        var decharge = {};
        let materiel = document.getElementsByName("materiel");
        let quantite = document.getElementsByName("quantite");
        let modele = document.getElementsByName("modele");
        let marque = document.getElementsByName("marque");

        var individu = parseInt($('#customselect3').val());
        var chantier = parseInt($('#customselect4').val());
        var dateDecharge = $('#dateDecharge').val();

        for (let i = 0; i < materiel.length; i++) {
            var dechargeDet = {};
            dechargeDet.quantite = quantite[i].value;
            dechargeDet.materiel = materiel[i].value;
            dechargeDet.model = modele[i].value;
            dechargeDet.marque = marque[i].value;
            dechargeDetList.push(dechargeDet);
        }
        decharge.dechargeDetList = dechargeDetList;
        decharge.individu = individu;
        decharge.dateDecharge = dateDecharge;
        decharge.chantier = chantier;

        var data = JSON.stringify(decharge);

        $.ajax({
            url: '/PortailRH-BETA/Decharge/save',
            method: 'POST',
            data: data,
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                window.location.href="/PortailRH-BETA/Decharge/Liste?statut=All";
            },
            error: function (error) {
                alert(error);
            }
        })

    });

    function getProjet() {
        let chantier = document.getElementsByName("materiel");
        $.ajax({
            url: '/PortailRH-BETA/Materiel/All',
            method: 'GET',
            dataType: 'json',
            success: function (data) {
                var selectChantier = $('#materiel' + (chantier.length - 1));
                $(data).each(function (index, element) {
                    selectChantier.append('<option value="' + element.id + '">' + element.type + '</option>');
                })
            },
            error: function (error) {
                alert(error);
            }
        });
    }


</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
<script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/jquery.devbridge-autocomplete/1.2.27/jquery.autocomplete.min.js}"></script>


</body>
</html>








